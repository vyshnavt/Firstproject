<div class="container rounded bg-white mt-5 pt-5 mb-5">
  <hr>
  <div class="row">
    <div class="col-md-4 col-lg-3 border-right d-flex justify-content-center">
      <div>
        <div class="d-flex flex-column ml-1 py-3"><img class="rounded-circle " width="150px"
          src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg"><span
          class="font-weight-bold">{{user.name}}</span><span class="text-black-50"></span>{{user.email}}<span> </span>
      </div>
      <div><button type="button" style="border-radius: 3px; width:12rem; line-height: 40px; border:none"
          class="primary-btn text-white" data-toggle="modal" data-target="#a555" data-whatever="@mdo">My Orders</button>
      </div>
      <div class="mt-3"><button type="button" style="border-radius: 3px; width:12rem; line-height: 40px; border:none"
          class="primary-btn text-white" data-toggle="modal" data-target="#address" data-whatever="@mdo">Add
          Address</button>
      </div>
      <div class="mt-3"><button type="button" style="border-radius: 3px; width:12rem; line-height: 40px; border:none"
          class="primary-btn text-white" data-toggle="modal" data-target="#showaddress" data-whatever="@mdo">Show
          Address</button>
      </div>
      </div>
    </div>
    <div class="col-md-8 col-lg-6 border-right mt-2">
      <hr>
      <div class="">
        <h3>Orders</h3>
        {{#each data}}
        <hr>
        <div>Order no {{inc @index}}</div>
        <hr>
        {{#each product}}
        <div class="row ">
          <div class="col-md-2 col-lg-2">
          <img style="width:5rem;" src="/proimg/{{this._id}}.jpg" alt="">
        </div>
          <div class="col-md-6 col-lg-4  pt-1">
          <span >{{this.name}}</span>
        </div>
        <div class="col-md-6 col-lg-3 pt-2">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Price : </h6></label><span>{{this.price}}</span>
        </div>

        <div class="col-md-6 col-lg-3 pt-2">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Quantity : </h6></label><span>{{this.quantity}}</span>

        </div>
        </div>
        {{/each}}
        <div class="row mt-3">
                  <div class="col-md-3">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Total : </h6></label><span>{{this.total}}</span>
        </div>
        <div class="col-md-5">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Date : </h6></label><span>{{this.date}}</span>
        </div>
        <div class="col-md-4">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Status : </h6></label><span id="{{this._id}}">{{this.status}}</span>
        </div>
       
                </div>
        <div class="mt-4">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Shipping Details : </h6></label><span>{{this.deliveryDetails.name}}
            ,</span><span>{{this.address.place}} ,</span>
          <span>{{this.address.address1}} ,</span><span>{{this.address.pincode}}
            ,</span><span>{{this.deliveryDetails.mobile}}</span>
        </div>
        {{#ifCompare status "Cancelled"}}
        <div class="mt-2"><a style="border-radius: 3px; line-height: 31px" class="btn primary-btn text-white mt-2">Cancelled</a>
        </div>
        {{else}}
        {{#ifCompare status "Deliverd"}}
        <div class="mt-2"><a style="border-radius: 3px; line-height: 31px" class="btn primary-btn text-white mt-2">Deliverd</a></div>
        {{else}}
        <div class="mt-2"><a onclick="cancelOrder('{{this._id}}')" style="border-radius: 3px; line-height: 31px"
            class="btn primary-btn text-white mt-2">Cancel</a></div>
        {{/ifCompare}}
        {{/ifCompare}}
        {{/each}}
      </div>


      <div class="d-flex justify-content-end mt-3"> <button type="button"
          style="border-radius: 3px; line-height: 40px; border:none" class="primary-btn text-white" data-toggle="modal"
          data-target="#a555" data-whatever="@mdo">View More</button></div>

      <div class="modal fade" id="a555" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" style="max-width: 700px" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Orders</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="d-flex justify-content-center">
              <div>
                {{#each datas}}
                <hr>
                <div>Order no {{inc @index}}</div>
                <hr>
                <h5>Product </h5>
                {{#each product}}                
                <div class="row">
                  
                  <div class="col-md-2 pb-1">
          <img style="width:5rem;" src="/proimg/{{this._id}}.jpg" alt="">
        </div>
          <div class="col-md-4 pt-3">
          <span>{{this.name}}</span>
        </div>
        <div class="col-md-3 pt-3">
          <label ><h6 style="color: #777777;font-weight: bold;">Price : </h6 ></label><span>{{this.price}}</span>
        </div>

        <div class="col-md-3 pt-3">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Quantity : </h6></label><span>{{this.quantity}}</span>

        </div>
        </div>
                
                {{/each}}
                <div class="row mt-2">
                  <div class="col-md-3">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Total : </h6></label><span>{{this.total}}</span>
        </div>
        <div class="col-md-3">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Date : </h6></label><span>{{this.date}}</span>
        </div>
        <div class="col-md-4">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Status : </h6></label><span id="{{this._id}}">{{this.status}}</span>
        </div>
       
                </div>
                 <div class="mt-2">
          <label for=""><h6 style="color: #777777;font-weight: bold;">payment Method : </h6></label><span>{{this.payment}}</span>
        </div>
        <div class="mt-2">
          <label for=""><h6 style="color: #777777;font-weight: bold;">Shipping Details : </h6></label><span>{{this.deliveryDetails.name}}
            ,</span><span>{{this.address.place}} ,</span>
          <span>{{this.address.address1}} ,</span><span>{{this.address.pincode}}
            ,</span><span>{{this.deliveryDetails.mobile}}</span>
        </div>
                {{#ifCompare status "cancelled"}}
                <div><a style="border-radius: 3px; line-height: 31px"
                    class="btn primary-btn text-white mt-2">Cancelled</a></div>
                {{else}}
                {{#ifCompare status "Deliverd"}}
                <div><a style="border-radius: 3px; line-height: 31px"
                    class="btn primary-btn text-white mt-2">Deliverd</a></div>
                {{else}}
                <div><a onclick="cancelOrder('{{this._id}}')" style="border-radius: 3px; line-height: 31px"
                    class="btn primary-btn text-white mt-2">Cancel</a></div>
                {{/ifCompare}}
                {{/ifCompare}}
                {{/each}}
              </div>
              <div class="modal-footer">
              </div>
            </div>
          </div>
        </div>
      </div>


      {{!-- add adress --}}

      <div class="modal fade" id="address" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" style="max-width: 700px" role="document">
          <div class="modal-content ">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Add Address</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="d-flex justify-content-center">
              <form class="mt-2" action="/add-address" method="post">
                <div class="col-md-6 form-group p_star ">
                  <input type="text" class="form-control" id="name" name="name" placeholder="First name"
                    onkeyup="namevalidate()">
                  <div class="text-danger" id="name-error"></div>
                </div>
                <div class="col-md-5 form-group p_star  px-2">
                  <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Last name"
                    onkeyup="lastnamevalidate()">
                  <div class="text-danger" id="lastname-error"></div>
                </div>

                <div class="col-md-6 form-group p_star">
                  <input type="text" class="form-control" id="email" name="email" placeholder="Email Address"
                    onkeyup="emailvalidate()">
                  <div class="text-danger" id="email-error"></div>
                </div>
                <div class="col-md-5 form-group p_star px-2">
                  <input type="text" class="form-control" id="mobile" name="mobile" placeholder="Phone number"
                    onkeyup="numbervalidate()">
                  <div class="text-danger" id="mobile-error"></div>
                </div>
                <div class="col-md-12 form-group p_star">
                  <input type="text" class="form-control" id="address" name="address" placeholder="Address "
                    onkeyup="addressvalidate()">
                  <div class="text-danger" id="address-error"></div>
                </div>

                <div class="col-md-12 form-group p_star">
                  <input type="text" class="form-control" id="city" name="city" placeholder="Town/City"
                    onkeyup="cityvalidate()">
                  <div class="text-danger" id="city-error"></div>
                </div>
                <div class="col-md-12 form-group">
                  <input type="text" class="form-control" id="pincode" name="pincode" placeholder="Pincode"
                    onkeyup="pincodevalidate()">
                  <div class="text-danger" id="pincode-error"></div>
                  <input type="text" name="user" value="{{user._id}}" hidden>
                </div>
                <div class="d-flex justify-content-end p-2 mx-2">
                  <button type="submit" style="border-radius: 3px; line-height: 40px; border:none"
                    class="primary-btn text-white">Add</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="showaddress" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content ">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Show Address</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>{{#each address}}

            <div>
              <hr>
              <hr>
            </div>
            <div class="d-flex justify-content-center">

              <table>
                <thead>
                  <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                  </tr>
                </thead>

                <tbody>

                  <tr>
                    <td>Name </td>
                    <td class=" px-2">:</td>
                    <td class=" px-3">{{name}} {{lastname}}</td>
                  </tr>
                  <tr>
                    <td>Email </td>
                    <td class=" px-2">:</td>
                    <td class="px-3">{{email}}</td>
                  </tr>
                  <tr>
                    <td>Mobile no </td>
                    <td class=" px-2">:</td>
                    <td class="px-3">{{mobile}}</td>
                  </tr>
                  <tr>
                    <td>Address </td>
                    <td class=" px-2">:</td>
                    <td class="px-3">{{address}}</td>
                  </tr>
                  <tr>
                    <td>City </td>
                    <td class=" px-2">:</td>
                    <td class="px-3">{{city}}</td>
                  </tr>
                  <tr>
                    <td>Pincode </td>
                    <td class=" px-2">:</td>
                    <td class=" px-3">{{pincode}}</td>
                  </tr>

                  <div>
                    <hr>
                  </div>
                </tbody>
              </table>

            </div>
            <div class="m-3 d-flex justify-content-between">
              <div class="mt-3"><button type="button" style="border-radius: 3px; line-height: 40px; border:none"
                  class="primary-btn text-white" data-toggle="modal" data-target="#e{{this._id}}"
                  data-whatever="@mdo">Edit</button></div>
              <div class="mt-3"><a onclick="deleteAddress('{{this._id}}')" type="button"
                  style="border-radius: 3px; line-height: 40px; border:none" class="primary-btn text-white">Delete</a>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
        {{!-- edit address --}}
        {{#each address}}
        <div class="modal fade" id="e{{this._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
          aria-hidden="true">
          <div class="modal-dialog" style="max-width: 700px" role="document">
            <div class="modal-content ">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Address</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="d-flex justify-content-center">
                <form class="mt-2" action="/edit-address/{{this._id}}" method="post">
                  <div class="col-md-6 form-group p_star ">
                    <input type="text" class="form-control" id="name" name="name" value="{{this.name}}"
                      placeholder="First name" onkeyup="namevalidate()">
                    <div class="text-danger" id="name-error"></div>
                  </div>
                  <div class="col-md-5 form-group p_star  px-2">
                    <input type="text" class="form-control" id="lastname" name="lastname" value="{{this.lastname}}"
                      placeholder="Last name" onkeyup="lastnamevalidate()">
                    <div class="text-danger" id="lastname-error"></div>
                  </div>

                  <div class="col-md-6 form-group p_star">
                    <input type="text" class="form-control" id="email" name="email" value="{{this.email}}"
                      placeholder="Email Address" onkeyup="emailvalidate()">
                    <div class="text-danger" id="email-error"></div>
                  </div>
                  <div class="col-md-5 form-group p_star  px-2">
                    <input type="text" class="form-control" id="mobile" name="mobile" value="{{this.mobile}}"
                      placeholder="Phone number" onkeyup="numbervalidate()">
                    <div class="text-danger" id="mobile-error"></div>
                  </div>
                  <div class="col-md-12 form-group p_star">
                    <input type="text" class="form-control" id="address" name="address" value="{{this.address}}"
                      placeholder="Address " onkeyup="addressvalidate()">
                    <div class="text-danger" id="address-error"></div>
                  </div>

                  <div class="col-md-12 form-group p_star">
                    <input type="text" class="form-control" id="city" name="city" value="{{this.city}}"
                      placeholder="Town/City" onkeyup="cityvalidate()">
                    <div class="text-danger" id="city-error"></div>
                  </div>
                  <div class="col-md-12 form-group">
                    <input type="text" class="form-control" id="pincode" value="{{this.pincode}}" name="pincode"
                      placeholder="Pincode" onkeyup="pincodevalidate()">
                    <div class="text-danger" id="pincode-error"></div>
                    <input type="text" name="user" value="{{this.user}}" hidden>
                  </div>
                  <div class="d-flex justify-content-end p-2 mx-2">
                    <button type="submit" style="border-radius: 3px; line-height: 40px; border:none"
                      class="primary-btn text-white">Update</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        {{/each}}
      </div>




    </div>
    <div class="col-lg-3">
      <div class="p-3 py-5">

        <div class="d-flex justify-content-between align-items-center experience"><span>
            <h4>Change Password</h4>
          </span>
        </div>
        <br>
        <form method="post" id="changeUserPassword-form">
          <div class="col-md-12"><label class="labels">Enter Current Password</label><input type="password"
              class="form-control" id="password" name="currentPassword" onkeyup="passwordvalidate()"></div> <br>
          <div class="text-danger" id="passworderror"></div>
          <div class="col-md-12"><label class="labels">New Password</label><input type="password" class="form-control"
              id="newpassword" name="newpassword" onkeyup="newpasswordvalidate()"></div> <br>
          <div class="text-danger" id="newpassworderror"></div>
          <div class="col-md-12"><label class="labels">Re-Enter New Password</label><input type="password"
              id="reepassword" class="form-control" onkeyup="repasswordvalidate()"></div>
          <div class="text-danger" id="reepassworderror"></div>
          <button type="submit" style="border-radius: 3px; line-height: 40px" onclick="return validate()"
            class="btn btn primary-btn text-white mt-3  ml-3">Update</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  function passwordvalidate() {
    let Password = document.getElementById("password").value
    let Passworderror = document.getElementById("passworderror")
    if (Password == "") {
      Passworderror.innerHTML = "This field must be required!"
      return false
    }
    if (Password.length <= 5) {
      Passworderror.innerHTML = "Must be 5 charactertics!"
      return false
    }
    Passworderror.innerHTML = ""
    return true
  }

  function newpasswordvalidate() {
    let Password = document.getElementById("newpassword").value
    let Passworderror = document.getElementById("newpassworderror")
    if (Password == "") {
      Passworderror.innerHTML = "This field must be required!"
      return false
    }
    if (Password.length <= 5) {
      Passworderror.innerHTML = "Must be 5 charactertics!"
      return false
    }
    Passworderror.innerHTML = ""
    return true
  }

  function repasswordvalidate() {
    const password = document.getElementById("newpassword").value
    const rePassword = document.getElementById("reepassword").value
    const rePassworderror = document.getElementById("reepassworderror")
    if (rePassword != password) {
      rePassworderror.innerHTML = "Password must be same"
      return false
    }
    if (rePassword == "") {
      rePassworderror.innerHTML = "This feild required!"
      return false
    }
    rePassworderror.innerHTML = ""
    return true
  }

  function validate() {
    if (passwordvalidate() && newpasswordvalidate() && repasswordvalidate()) {
      return true
    }
    return false
  }
</script>